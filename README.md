# 🎭 シンプルお笑いAPI（テスト用）

このリポジトリは、[`runn`](https://github.com/k1LoW/runn) を使った E2E テストのために作られた簡易APIサーバーです。
APIは `/joke` エンドポイントのみで、いくつかの日本語ジョークを JSON 形式で返します。

---

## 📦 使い方

### 1. リポジトリをクローン

```bash
git clone https://github.com/your-username/joke-server.git
cd joke-server
```

### 2. サーバーを起動

```bash
go run main.go
```

サーバーが `:8080` で起動します。

### 3. 動作確認

`curl` を使ってジョークを取得できます：

```bash
curl http://localhost:8080/joke
```

---

## ✅ E2E テスト（`runn` 使用）

このプロジェクトには `runn` を使った E2E テストが含まれています。

### 1. テストの実行

```bash
go test -v
```

上記コマンドで `runn` を使ったテストが実行され、APIのレスポンスが正しいかどうかを確認します。

### 2. runbook の自動生成

`runn` CLI を使って runbook（テストYAML）を自動生成することができます。

```bash
runn new
```

プロンプトに従って設定すれば、必要な `*.runn.yaml` ファイルが作成されます。

---

## 🧪 複数ステップのテストも可能！

`runn` を使えば、複雑なシナリオ（リクエスト→レスポンスの中間変数使用など）も簡単にテストできます。

詳しくは以下の記事が参考になります：

👉 [Runn を使って API の E2E テストを柔軟に書く方法（外部リンク）](https://zenn.dev/kawaken/articles/2023-04-11-try-runn)

---

## 🔗 エンドポイント

| メソッド | パス      | 内容                      |
| ---- | ------- | ----------------------- |
| GET  | `/joke` | ランダムなお笑いジョークを返します（配列形式） |

---

## 🛠 技術スタック

* Go
* chi (HTTPルーター)
* runn（E2Eテスト用ツール）

---

## 📝 備考

このリポジトリは学習・検証目的で作成されたもので、本番環境用ではありません。

---
